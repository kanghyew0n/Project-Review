# 마지막 리뷰 (09.27 ~ 10.10)
### ✅ 새로 알게 된 점 1 : cloudinary
이미지 업로드를 하기 위해서는 두가지 방법이 있다 (내가 아는 것은) <br/>
선택한 방법은 2번! 이미지를 URL로 변환해서 사용하면 백도 프론트도 편할 것 같았다! 
1. 로컬 이미지를 받아 백엔드에서 처리하고 프론트는 이미지 URL만 받아 처리한다.
2. 프론트에서 이미지를 URL로 변환하여 URL만 백엔드에게 보낸다.

* [cloudinary](https://cloudinary.com/) 에 가입해서 
* Dashboard로 이동하여 키, 클라우드 이름 등을 env 파일에 저장한다.
* 무료 계정이 1GB밖에 안되기때문에 이번 프로젝트에서 사이즈 크기를 3MB로 제한을 두었다.
```js
    let formData = new FormData();
    formData.append("api_key", import.meta.env.VITE_CLOUD_API_KEY);
    formData.append("upload_preset", import.meta.env.VITE_CLOUD_PRESET_NAME);
    formData.append("timestamp", (Date.now() / 1000) | 0);
    formData.append(`file`, ref.current.files[0]);

    await instance
      .post(import.meta.env.VITE_CLOUD_API_URL, formData)
      .then((res) => {
        setPlaceImage(res.data.url); // 이미지 주소를 담아주었다!
      })
      .catch((err) => console.log(err))
```

<br/>

### ✅ 새로 알게 된 점 2 : axios instance & JWT access token
* JWT를 사용하여 토큰을 가지고 사용자의 권한을 확인해야 했다.
* axios instance를 사용하여 request / response 전에 interceptors로 토큰을 헤더에 보내기로 했다.
* 아쉽게도 access token 까지만 사용하여 refresh token으로 access token을 재발급받는 과정은 해보지 못했다.

<br/>


### ⚠️ 겪은 문제점 1: axios instance & JWT access token

* 테스트 도중 500 에러가 여러번 발생했다.
* 첫번째에서는 백엔드의 filter 부분에 오류가 있었다. 
  * 보통 토큰을 보낼때 Bearer과 함께 보내는데 filter로 걸러지는 부분에 조건이 잘못되었었다. 
  * Bearer의 의미 : `Authorization: <type> <credentials>` 에서 인증 타입을 의미하고, Bearer는 JWT 혹은 OAuth에 대한 토큰에 대한 인증타입이다.
* 두번째는 프론트 인터셉터에서 문제가 있었디.
  * 우리는 로컬스토리지에 토큰을 저장했는데 잘못된 (유효하지 않은) 토큰이 저장되었다고 해서 확인해보았다.
  * `.interceptors.response.use` 부분에서 `localStorage.setItem("access_Token", response.headers.authorization.split(' ')[1])`로 저장하고 있었다. (.split(' ')[1]은 Bearer를 제외한 토큰값만을 의미한다)
  *  이때 생각도 못한 Dot Notation, Bracket Notation 개념이,,, ㄴㅇㄱ
  *  Dot Notation : 변수할당 불가능, 띄어쓰기 포함 불가능...
  *  `localStorage.setItem("access_Token", response.headers["authorization"].split(' ')[1])` 로 해결했당!


<br/>

### ⚠️ 겪은 문제점 2: cloudinary & axios instance



<br/>

### ✅ 새로 알게 된 점 3 : 


<br/>


### ✅ 새로 알게 된 점 4 : 주소 API 사용하기


<br/>

### ✅ 새로 알게 된 점 5 : vite html에 env 파일 설정하기


<br/>

### ✅ 새로 알게 된 점 6 : vercel 배포

<br/>

### 👍 잘한 점

<br/>


### 🥲 아쉬운 점



<br/>


### 🚀 추가적으로



<br/>
<br/>

